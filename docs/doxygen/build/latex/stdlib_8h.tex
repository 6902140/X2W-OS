\hypertarget{stdlib_8h}{}\doxysection{/home/data/proj/oskernel2023-\/x2w/include/stdlib.h 文件参考}
\label{stdlib_8h}\index{/home/data/proj/oskernel2023-\/x2w/include/stdlib.h@{/home/data/proj/oskernel2023-\/x2w/include/stdlib.h}}


{\ttfamily \mbox{\hyperlink{stdlib_8h}{stdlib.\+h}}}提供一系列帮助函数  


{\ttfamily \#include \char`\"{}types.\+h\char`\"{}}\newline
\doxysubsection*{宏定义}
\begin{DoxyCompactItemize}
\item 
\#define \mbox{\hyperlink{stdlib_8h_adc59f925a90e4b37b619e4ed89321029}{offset}}(struct\+\_\+type,  member\+\_\+name)~(\mbox{\hyperlink{types_8h_a186ea1339bffb378854987065835afe3}{size\+\_\+t}}) (\&((struct\+\_\+type$\ast$)0)-\/$>$member\+\_\+name)
\begin{DoxyCompactList}\small\item\em {\ttfamily offset}宏用于获得结构体{\ttfamily struct\+\_\+type}中名为{\ttfamily member\+\_\+name}成员的偏移量(以字节计算) \end{DoxyCompactList}\item 
\#define \mbox{\hyperlink{stdlib_8h_a62bb4208280af3c1efd802971ce71318}{member2struct}}(struct\+\_\+type,  member\+\_\+name,  elem\+\_\+ptr)~(struct\+\_\+type$\ast$)((\mbox{\hyperlink{types_8h_aa232ecf786a74ce5363c36c10798d2b1}{uint64\+\_\+t}})elem\+\_\+ptr -\/ \mbox{\hyperlink{stdlib_8h_adc59f925a90e4b37b619e4ed89321029}{offset}}(struct\+\_\+type, member\+\_\+name))
\begin{DoxyCompactList}\small\item\em {\ttfamily member2struct}宏用于将指向结构体{\ttfamily struct\+\_\+type}中的名为{\ttfamily member\+\_\+name}的成员的指针转为指向{\ttfamily struct\+\_\+type}的指针 \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{函数}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{stdlib_8h_aa29b43ffe3685a28aa766b0be471b994}{itoa}} (\mbox{\hyperlink{types_8h_aa232ecf786a74ce5363c36c10798d2b1}{uint64\+\_\+t}} integer, char $\ast$$\ast$buf\+\_\+ptr\+\_\+addr, \mbox{\hyperlink{types_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\+\_\+t}} base)
\begin{DoxyCompactList}\small\item\em {\ttfamily itoa} (integer to ascii) 用于将{\ttfamily uint64\+\_\+t}数字转换为{\ttfamily char$\ast$}数字, 并将其存入{\ttfamily $\ast$buf\+\_\+ptr\+\_\+addr}指向的内存中 \end{DoxyCompactList}\item 
\mbox{\hyperlink{types_8h_a312c7e8848187d110315ab83a7b3d4d0}{int64\+\_\+t}} \mbox{\hyperlink{stdlib_8h_affe9aa2f8448f2b2faa3e112d6d0811f}{atoi}} (char $\ast$str)
\begin{DoxyCompactList}\small\item\em \textquotesingle{}atoi函数实现字符串转整形数字 \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{详细描述}
{\ttfamily \mbox{\hyperlink{stdlib_8h}{stdlib.\+h}}}提供一系列帮助函数 

\begin{DoxyAuthor}{作者}
Shihong Wang (\href{mailto:jack4shihong@gmail.com}{\texttt{ jack4shihong@gmail.\+com}}) 
\end{DoxyAuthor}
\begin{DoxyVersion}{版本}
0.\+1 
\end{DoxyVersion}
\begin{DoxyDate}{日期}
2023-\/04-\/09
\end{DoxyDate}
\begin{DoxyWarning}{警告}
为了避免编译时编译器使用系统的{\ttfamily \mbox{\hyperlink{stdlib_8h}{stdlib.\+h}}}库, 编译时需要为{\ttfamily G\+CC}指定{\ttfamily -\/nostdinc}选项, 详见根目录下的{\ttfamily Makefile}
\end{DoxyWarning}
\begin{DoxyCopyright}{版权所有}
Copyright Shihong Wang (c) 2023 with G\+NU Public License V3.\+0 
\end{DoxyCopyright}


\doxysubsection{宏定义说明}
\mbox{\Hypertarget{stdlib_8h_a62bb4208280af3c1efd802971ce71318}\label{stdlib_8h_a62bb4208280af3c1efd802971ce71318}} 
\index{stdlib.h@{stdlib.h}!member2struct@{member2struct}}
\index{member2struct@{member2struct}!stdlib.h@{stdlib.h}}
\doxysubsubsection{\texorpdfstring{member2struct}{member2struct}}
{\footnotesize\ttfamily \#define member2struct(\begin{DoxyParamCaption}\item[{}]{struct\+\_\+type,  }\item[{}]{member\+\_\+name,  }\item[{}]{elem\+\_\+ptr }\end{DoxyParamCaption})~(struct\+\_\+type$\ast$)((\mbox{\hyperlink{types_8h_aa232ecf786a74ce5363c36c10798d2b1}{uint64\+\_\+t}})elem\+\_\+ptr -\/ \mbox{\hyperlink{stdlib_8h_adc59f925a90e4b37b619e4ed89321029}{offset}}(struct\+\_\+type, member\+\_\+name))}



{\ttfamily member2struct}宏用于将指向结构体{\ttfamily struct\+\_\+type}中的名为{\ttfamily member\+\_\+name}的成员的指针转为指向{\ttfamily struct\+\_\+type}的指针 


\begin{DoxyParams}{参数}
{\em struct\+\_\+type} & 结构体名 \\
\hline
{\em member\+\_\+name} & 结构体中的成员名 \\
\hline
{\em elem\+\_\+ptr} & 指向结构体中{\ttfamily member\+\_\+name}成员的指针\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{返回}
struct\+\_\+type$\ast$ 指向成员所在的结构体的指针
\end{DoxyReturn}
举例\+: 
\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keyword}{struct }person\_t \{}
\DoxyCodeLine{     \mbox{\hyperlink{types_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\_t}} age;}
\DoxyCodeLine{     \mbox{\hyperlink{types_8h_a435d1572bf3f880d55459d9805097f62}{uint32\_t}} id;}
\DoxyCodeLine{     \textcolor{keywordtype}{char} name[10];}
\DoxyCodeLine{\};}
\DoxyCodeLine{}
\DoxyCodeLine{person\_t jack = \{22, 2196113760, \textcolor{stringliteral}{"Shihong Wang"}\};}
\DoxyCodeLine{\mbox{\hyperlink{types_8h_a435d1572bf3f880d55459d9805097f62}{uint32\_t}} *id\_ptr = \&jack.id;}
\DoxyCodeLine{\textcolor{preprocessor}{\# 将指向成员的指针转换为指向结构体的指针}}
\DoxyCodeLine{person\_t *person\_ptr = \mbox{\hyperlink{stdlib_8h_a62bb4208280af3c1efd802971ce71318}{member2struct}}(person\_t, \textcolor{keywordtype}{id}, id\_ptr);}
\DoxyCodeLine{\&jack == person\_ptr ? true : \textcolor{keyword}{false};          \# \textcolor{keywordflow}{return} \textcolor{keyword}{true}}
\end{DoxyCode}
 \mbox{\Hypertarget{stdlib_8h_adc59f925a90e4b37b619e4ed89321029}\label{stdlib_8h_adc59f925a90e4b37b619e4ed89321029}} 
\index{stdlib.h@{stdlib.h}!offset@{offset}}
\index{offset@{offset}!stdlib.h@{stdlib.h}}
\doxysubsubsection{\texorpdfstring{offset}{offset}}
{\footnotesize\ttfamily \#define offset(\begin{DoxyParamCaption}\item[{}]{struct\+\_\+type,  }\item[{}]{member\+\_\+name }\end{DoxyParamCaption})~(\mbox{\hyperlink{types_8h_a186ea1339bffb378854987065835afe3}{size\+\_\+t}}) (\&((struct\+\_\+type$\ast$)0)-\/$>$member\+\_\+name)}



{\ttfamily offset}宏用于获得结构体{\ttfamily struct\+\_\+type}中名为{\ttfamily member\+\_\+name}成员的偏移量(以字节计算) 


\begin{DoxyParams}{参数}
{\em struct\+\_\+type} & 结构体名 \\
\hline
{\em member\+\_\+name} & 结构体中的成员名\\
\hline
\end{DoxyParams}
举例\+: 
\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keyword}{struct }person\_t \{}
\DoxyCodeLine{     \mbox{\hyperlink{types_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\_t}} age;}
\DoxyCodeLine{     \mbox{\hyperlink{types_8h_a435d1572bf3f880d55459d9805097f62}{uint32\_t}} id;}
\DoxyCodeLine{     \textcolor{keywordtype}{char} name[10];}
\DoxyCodeLine{\};}
\DoxyCodeLine{\mbox{\hyperlink{stdlib_8h_adc59f925a90e4b37b619e4ed89321029}{offset}}(person\_t, age);        \# \textcolor{keywordflow}{return} 0}
\DoxyCodeLine{\mbox{\hyperlink{stdlib_8h_adc59f925a90e4b37b619e4ed89321029}{offset}}(person\_t, \textcolor{keywordtype}{id});         \# \textcolor{keywordflow}{return} 1}
\DoxyCodeLine{\mbox{\hyperlink{stdlib_8h_adc59f925a90e4b37b619e4ed89321029}{offset}}(person\_t, name);       \# \textcolor{keywordflow}{return} 5}
\end{DoxyCode}
 

\doxysubsection{函数说明}
\mbox{\Hypertarget{stdlib_8h_affe9aa2f8448f2b2faa3e112d6d0811f}\label{stdlib_8h_affe9aa2f8448f2b2faa3e112d6d0811f}} 
\index{stdlib.h@{stdlib.h}!atoi@{atoi}}
\index{atoi@{atoi}!stdlib.h@{stdlib.h}}
\doxysubsubsection{\texorpdfstring{atoi()}{atoi()}}
{\footnotesize\ttfamily \mbox{\hyperlink{types_8h_a312c7e8848187d110315ab83a7b3d4d0}{int64\+\_\+t}} atoi (\begin{DoxyParamCaption}\item[{char $\ast$}]{str }\end{DoxyParamCaption})}



\textquotesingle{}atoi函数实现字符串转整形数字 


\begin{DoxyParams}{参数}
{\em str} & 需要转换的字符串 \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{返回}
int64\+\_\+t 转换得到的整形数字 
\end{DoxyReturn}
\mbox{\Hypertarget{stdlib_8h_aa29b43ffe3685a28aa766b0be471b994}\label{stdlib_8h_aa29b43ffe3685a28aa766b0be471b994}} 
\index{stdlib.h@{stdlib.h}!itoa@{itoa}}
\index{itoa@{itoa}!stdlib.h@{stdlib.h}}
\doxysubsubsection{\texorpdfstring{itoa()}{itoa()}}
{\footnotesize\ttfamily void itoa (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{types_8h_aa232ecf786a74ce5363c36c10798d2b1}{uint64\+\_\+t}}}]{integer,  }\item[{char $\ast$$\ast$}]{buf\+\_\+ptr\+\_\+addr,  }\item[{\mbox{\hyperlink{types_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\+\_\+t}}}]{base }\end{DoxyParamCaption})}



{\ttfamily itoa} (integer to ascii) 用于将{\ttfamily uint64\+\_\+t}数字转换为{\ttfamily char$\ast$}数字, 并将其存入{\ttfamily $\ast$buf\+\_\+ptr\+\_\+addr}指向的内存中 


\begin{DoxyParams}{参数}
{\em integer} & 需要转为字符串形式的整数 \\
\hline
{\em buf\+\_\+ptr\+\_\+addr} & 指向接受输出的字符串的指针, 即字符数组名的地址 \\
\hline
{\em base} & 转换进制, 可以任意指定. 例如\+:
\begin{DoxyItemize}
\item {\ttfamily base = 2}\+: 将{\ttfamily integer}转换为二进制形式的字符串数字, 例如 {\ttfamily 6 = \char`\"{}110\char`\"{}}
\item {\ttfamily base = 8}\+: 将{\ttfamily integer}转换为二进制形式的字符串数字, 例如 {\ttfamily 23 = \char`\"{}27\char`\"{}}
\item {\ttfamily base = 16}\+: 将{\ttfamily integer}转换为二进制形式的字符串数字, 例如 {\ttfamily 47 = \char`\"{}2\+F\char`\"{}}
\end{DoxyItemize}\\
\hline
\end{DoxyParams}
\begin{DoxyNote}{注解}
因为是使用递归完成的转换, 因此多次递归需要共享字符数组, 因此需要字符数组的二级指针 
\end{DoxyNote}
