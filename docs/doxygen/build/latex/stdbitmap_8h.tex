\hypertarget{stdbitmap_8h}{}\doxysection{/home/data/proj/oskernel2023-\/x2w/include/stdbitmap.h 文件参考}
\label{stdbitmap_8h}\index{/home/data/proj/oskernel2023-\/x2w/include/stdbitmap.h@{/home/data/proj/oskernel2023-\/x2w/include/stdbitmap.h}}


{\ttfamily \mbox{\hyperlink{stdbitmap_8h}{stdbitmap.\+h}}}是{\ttfamily X2\+W-\/\+OS}的标准位图实现  


{\ttfamily \#include \char`\"{}types.\+h\char`\"{}}\newline
\doxysubsection*{类}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{struct____bitmap__t}{\+\_\+\+\_\+bitmap\+\_\+t}}
\begin{DoxyCompactList}\small\item\em {\ttfamily bitmap\+\_\+t}是位图结构体 \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{宏定义}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{stdbitmap_8h_ae17ab5f46ede918d194df850b7484062}\label{stdbitmap_8h_ae17ab5f46ede918d194df850b7484062}} 
\#define \mbox{\hyperlink{stdbitmap_8h_ae17ab5f46ede918d194df850b7484062}{B\+I\+T\+M\+A\+P\+\_\+\+T\+A\+K\+EN}}~1
\begin{DoxyCompactList}\small\item\em {\ttfamily bitmap}中位为1, 表示资源被占用 \end{DoxyCompactList}\item 
\mbox{\Hypertarget{stdbitmap_8h_a313921c345aa6084a33b61aa5378c16d}\label{stdbitmap_8h_a313921c345aa6084a33b61aa5378c16d}} 
\#define \mbox{\hyperlink{stdbitmap_8h_a313921c345aa6084a33b61aa5378c16d}{B\+I\+T\+M\+A\+P\+\_\+\+F\+R\+EE}}~0
\begin{DoxyCompactList}\small\item\em {\ttfamily bitmap}中位为0, 表示资源未被占用 \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{类型定义}
\begin{DoxyCompactItemize}
\item 
typedef struct \mbox{\hyperlink{struct____bitmap__t}{\+\_\+\+\_\+bitmap\+\_\+t}} \mbox{\hyperlink{stdbitmap_8h_ab332e61ebf800daa3f1100099da4b005}{bitmap\+\_\+t}}
\begin{DoxyCompactList}\small\item\em {\ttfamily bitmap\+\_\+t}是位图结构体 \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{函数}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{stdbitmap_8h_aab61f838d929d15b68e45f5ab8945092}{bitmap\+\_\+init}} (\mbox{\hyperlink{stdbitmap_8h_ab332e61ebf800daa3f1100099da4b005}{bitmap\+\_\+t}} $\ast$btmp\+\_\+ptr, \mbox{\hyperlink{types_8h_a186ea1339bffb378854987065835afe3}{size\+\_\+t}} size)
\begin{DoxyCompactList}\small\item\em {\ttfamily bitmap\+\_\+init}用于初始化{\ttfamily btmp\+\_\+ptr}指向的位图 \end{DoxyCompactList}\item 
void \mbox{\hyperlink{stdbitmap_8h_a8c6bba641055d07b15dba147ddae11cb}{bitmap\+\_\+set}} (\mbox{\hyperlink{stdbitmap_8h_ab332e61ebf800daa3f1100099da4b005}{bitmap\+\_\+t}} $\ast$btmp\+\_\+ptr, \mbox{\hyperlink{types_8h_ad8c04c91bab78dc7c80f298f11ff2cd7}{offset\+\_\+t}} bit\+\_\+idx, \mbox{\hyperlink{types_8h_a253b248072cfc8bd812c69acd0046eed}{Bool}} taken)
\begin{DoxyCompactList}\small\item\em {\ttfamily bitmap\+\_\+set}用于设置{\ttfamily btmp\+\_\+ptr}指向的位图中偏移量为{\ttfamily bit\+\_\+idx}的位 \end{DoxyCompactList}\item 
\mbox{\hyperlink{types_8h_a253b248072cfc8bd812c69acd0046eed}{Bool}} \mbox{\hyperlink{stdbitmap_8h_a7dde0c9bd3cb255266ef4f3c0be77359}{bitmap\+\_\+test}} (\mbox{\hyperlink{stdbitmap_8h_ab332e61ebf800daa3f1100099da4b005}{bitmap\+\_\+t}} $\ast$btmp\+\_\+ptr, \mbox{\hyperlink{types_8h_ad8c04c91bab78dc7c80f298f11ff2cd7}{offset\+\_\+t}} bit\+\_\+idx)
\begin{DoxyCompactList}\small\item\em {\ttfamily bitmap\+\_\+test}用于测试{\ttfamily btmp\+\_\+ptr}指向的位图中{\ttfamily bit\+\_\+idx}位是否被占用 \end{DoxyCompactList}\item 
\mbox{\hyperlink{types_8h_ad8c04c91bab78dc7c80f298f11ff2cd7}{offset\+\_\+t}} \mbox{\hyperlink{stdbitmap_8h_aca1c8b81b0884e53cd11ea4165296f2a}{bitmap\+\_\+scan}} (\mbox{\hyperlink{stdbitmap_8h_ab332e61ebf800daa3f1100099da4b005}{bitmap\+\_\+t}} $\ast$btmp\+\_\+ptr, \mbox{\hyperlink{types_8h_a186ea1339bffb378854987065835afe3}{size\+\_\+t}} cnt)
\begin{DoxyCompactList}\small\item\em {\ttfamily bitmap\+\_\+scan}用于向{\ttfamily btmp\+\_\+ptr}指向的位图中循找连续{\ttfamily cnt}个空闲位/资源 \end{DoxyCompactList}\item 
\mbox{\hyperlink{types_8h_a253b248072cfc8bd812c69acd0046eed}{Bool}} \mbox{\hyperlink{stdbitmap_8h_a599fa4a0252b8d2a15151bf80ccaa55f}{bitmap\+\_\+acquire}} (\mbox{\hyperlink{stdbitmap_8h_ab332e61ebf800daa3f1100099da4b005}{bitmap\+\_\+t}} $\ast$btmp\+\_\+ptr, \mbox{\hyperlink{types_8h_ad8c04c91bab78dc7c80f298f11ff2cd7}{offset\+\_\+t}} out\mbox{[}$\,$\mbox{]}, \mbox{\hyperlink{types_8h_a186ea1339bffb378854987065835afe3}{size\+\_\+t}} cnt)
\begin{DoxyCompactList}\small\item\em {\ttfamily bitmap\+\_\+acquire}会从{\ttfamily btmp\+\_\+ptr}指向的位图中申请{\ttfamily cnt}个位/资源, 得到的位的偏移将会放到数组{\ttfamily out}中 \end{DoxyCompactList}\item 
void \mbox{\hyperlink{stdbitmap_8h_a42aec55b5e233d5f94952fdc93c7c6d9}{bitmap\+\_\+release}} (\mbox{\hyperlink{stdbitmap_8h_ab332e61ebf800daa3f1100099da4b005}{bitmap\+\_\+t}} $\ast$btmp\+\_\+ptr, \mbox{\hyperlink{types_8h_ad8c04c91bab78dc7c80f298f11ff2cd7}{offset\+\_\+t}} out\mbox{[}$\,$\mbox{]}, \mbox{\hyperlink{types_8h_a186ea1339bffb378854987065835afe3}{size\+\_\+t}} cnt)
\begin{DoxyCompactList}\small\item\em {\ttfamily bitmap\+\_\+release}会释放从{\ttfamily btmp\+\_\+ptr}中申请得到的资源 \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{详细描述}
{\ttfamily \mbox{\hyperlink{stdbitmap_8h}{stdbitmap.\+h}}}是{\ttfamily X2\+W-\/\+OS}的标准位图实现 

\begin{DoxyAuthor}{作者}
Shihong Wang (\href{mailto:jack4shihong@gmail.com}{\texttt{ jack4shihong@gmail.\+com}}) 
\end{DoxyAuthor}
\begin{DoxyVersion}{版本}
0.\+1 
\end{DoxyVersion}
\begin{DoxyDate}{日期}
2023-\/04-\/13
\end{DoxyDate}
\begin{DoxyRefDesc}{待办事项}
\item[\mbox{\hyperlink{todo__todo000002}{待办事项}}]
\begin{DoxyEnumerate}
\item 测试stdbitmap库
\end{DoxyEnumerate}\end{DoxyRefDesc}


\begin{DoxyCopyright}{版权所有}
Copyright Shihong Wang (c) 2023 with G\+NU Public License V3.\+0 
\end{DoxyCopyright}


\doxysubsection{类型定义说明}
\mbox{\Hypertarget{stdbitmap_8h_ab332e61ebf800daa3f1100099da4b005}\label{stdbitmap_8h_ab332e61ebf800daa3f1100099da4b005}} 
\index{stdbitmap.h@{stdbitmap.h}!bitmap\_t@{bitmap\_t}}
\index{bitmap\_t@{bitmap\_t}!stdbitmap.h@{stdbitmap.h}}
\doxysubsubsection{\texorpdfstring{bitmap\_t}{bitmap\_t}}
{\footnotesize\ttfamily typedef struct \mbox{\hyperlink{struct____bitmap__t}{\+\_\+\+\_\+bitmap\+\_\+t}} \mbox{\hyperlink{stdbitmap_8h_ab332e61ebf800daa3f1100099da4b005}{bitmap\+\_\+t}}}



{\ttfamily bitmap\+\_\+t}是位图结构体 

\begin{DoxyNote}{注解}
{\ttfamily bitmap}用于管理大量资源, 若对应位为1, 则表示该资源已经被占用; 若对应位位0, 则表示该资源未被占用 
\end{DoxyNote}


\doxysubsection{函数说明}
\mbox{\Hypertarget{stdbitmap_8h_a599fa4a0252b8d2a15151bf80ccaa55f}\label{stdbitmap_8h_a599fa4a0252b8d2a15151bf80ccaa55f}} 
\index{stdbitmap.h@{stdbitmap.h}!bitmap\_acquire@{bitmap\_acquire}}
\index{bitmap\_acquire@{bitmap\_acquire}!stdbitmap.h@{stdbitmap.h}}
\doxysubsubsection{\texorpdfstring{bitmap\_acquire()}{bitmap\_acquire()}}
{\footnotesize\ttfamily \mbox{\hyperlink{types_8h_a253b248072cfc8bd812c69acd0046eed}{Bool}} bitmap\+\_\+acquire (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{stdbitmap_8h_ab332e61ebf800daa3f1100099da4b005}{bitmap\+\_\+t}} $\ast$}]{btmp\+\_\+ptr,  }\item[{\mbox{\hyperlink{types_8h_ad8c04c91bab78dc7c80f298f11ff2cd7}{offset\+\_\+t}}}]{out\mbox{[}$\,$\mbox{]},  }\item[{\mbox{\hyperlink{types_8h_a186ea1339bffb378854987065835afe3}{size\+\_\+t}}}]{cnt }\end{DoxyParamCaption})}



{\ttfamily bitmap\+\_\+acquire}会从{\ttfamily btmp\+\_\+ptr}指向的位图中申请{\ttfamily cnt}个位/资源, 得到的位的偏移将会放到数组{\ttfamily out}中 


\begin{DoxyParams}{参数}
{\em btmp\+\_\+ptr} & 指向被申请资源所在的位图 \\
\hline
{\em out} & 存放得到的位的偏移的数组 \\
\hline
{\em cnt} & 需要申请的资源数 \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{返回}
True 申请成功, {\ttfamily out}会存放申请得到的位 

False 申请失败, {\ttfamily out}会被填充为 -\/1
\end{DoxyReturn}
\begin{DoxyNote}{注解}
{\ttfamily bitmap\+\_\+acquire}找到位后会设置位
\end{DoxyNote}
\begin{DoxyWarning}{警告}
{\ttfamily bitmap\+\_\+acquire}不会管理{\ttfamily out}是否会溢出, 需要调用者负责管理{\ttfamily out}的大小 
\end{DoxyWarning}
\mbox{\Hypertarget{stdbitmap_8h_aab61f838d929d15b68e45f5ab8945092}\label{stdbitmap_8h_aab61f838d929d15b68e45f5ab8945092}} 
\index{stdbitmap.h@{stdbitmap.h}!bitmap\_init@{bitmap\_init}}
\index{bitmap\_init@{bitmap\_init}!stdbitmap.h@{stdbitmap.h}}
\doxysubsubsection{\texorpdfstring{bitmap\_init()}{bitmap\_init()}}
{\footnotesize\ttfamily void bitmap\+\_\+init (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{stdbitmap_8h_ab332e61ebf800daa3f1100099da4b005}{bitmap\+\_\+t}} $\ast$}]{btmp\+\_\+ptr,  }\item[{\mbox{\hyperlink{types_8h_a186ea1339bffb378854987065835afe3}{size\+\_\+t}}}]{size }\end{DoxyParamCaption})}



{\ttfamily bitmap\+\_\+init}用于初始化{\ttfamily btmp\+\_\+ptr}指向的位图 


\begin{DoxyParams}{参数}
{\em btmp\+\_\+ptr} & 指向需要初始化的位图的指针 \\
\hline
{\em size} & 位图的字节数 \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{stdbitmap_8h_a42aec55b5e233d5f94952fdc93c7c6d9}\label{stdbitmap_8h_a42aec55b5e233d5f94952fdc93c7c6d9}} 
\index{stdbitmap.h@{stdbitmap.h}!bitmap\_release@{bitmap\_release}}
\index{bitmap\_release@{bitmap\_release}!stdbitmap.h@{stdbitmap.h}}
\doxysubsubsection{\texorpdfstring{bitmap\_release()}{bitmap\_release()}}
{\footnotesize\ttfamily void bitmap\+\_\+release (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{stdbitmap_8h_ab332e61ebf800daa3f1100099da4b005}{bitmap\+\_\+t}} $\ast$}]{btmp\+\_\+ptr,  }\item[{\mbox{\hyperlink{types_8h_ad8c04c91bab78dc7c80f298f11ff2cd7}{offset\+\_\+t}}}]{out\mbox{[}$\,$\mbox{]},  }\item[{\mbox{\hyperlink{types_8h_a186ea1339bffb378854987065835afe3}{size\+\_\+t}}}]{cnt }\end{DoxyParamCaption})}



{\ttfamily bitmap\+\_\+release}会释放从{\ttfamily btmp\+\_\+ptr}中申请得到的资源 


\begin{DoxyParams}{参数}
{\em btmp\+\_\+ptr} & 指向需要释放的资源所在的位图 \\
\hline
{\em out} & 存放需要释放的资源的数组 \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{stdbitmap_8h_aca1c8b81b0884e53cd11ea4165296f2a}\label{stdbitmap_8h_aca1c8b81b0884e53cd11ea4165296f2a}} 
\index{stdbitmap.h@{stdbitmap.h}!bitmap\_scan@{bitmap\_scan}}
\index{bitmap\_scan@{bitmap\_scan}!stdbitmap.h@{stdbitmap.h}}
\doxysubsubsection{\texorpdfstring{bitmap\_scan()}{bitmap\_scan()}}
{\footnotesize\ttfamily \mbox{\hyperlink{types_8h_ad8c04c91bab78dc7c80f298f11ff2cd7}{offset\+\_\+t}} bitmap\+\_\+scan (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{stdbitmap_8h_ab332e61ebf800daa3f1100099da4b005}{bitmap\+\_\+t}} $\ast$}]{btmp\+\_\+ptr,  }\item[{\mbox{\hyperlink{types_8h_a186ea1339bffb378854987065835afe3}{size\+\_\+t}}}]{cnt }\end{DoxyParamCaption})}



{\ttfamily bitmap\+\_\+scan}用于向{\ttfamily btmp\+\_\+ptr}指向的位图中循找连续{\ttfamily cnt}个空闲位/资源 


\begin{DoxyParams}{参数}
{\em btmp\+\_\+ptr} & 指向被检查的位图 \\
\hline
{\em cnt} & 连续位数 \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{返回}
offset\+\_\+t 若不存在连续{\ttfamily cnt}个位, 则返回-\/1; 若存在则返回起始位的偏移
\end{DoxyReturn}
\begin{DoxyNote}{注解}
{\ttfamily bitmap\+\_\+scan}只会寻找位, 不会设置位 
\end{DoxyNote}
\mbox{\Hypertarget{stdbitmap_8h_a8c6bba641055d07b15dba147ddae11cb}\label{stdbitmap_8h_a8c6bba641055d07b15dba147ddae11cb}} 
\index{stdbitmap.h@{stdbitmap.h}!bitmap\_set@{bitmap\_set}}
\index{bitmap\_set@{bitmap\_set}!stdbitmap.h@{stdbitmap.h}}
\doxysubsubsection{\texorpdfstring{bitmap\_set()}{bitmap\_set()}}
{\footnotesize\ttfamily void bitmap\+\_\+set (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{stdbitmap_8h_ab332e61ebf800daa3f1100099da4b005}{bitmap\+\_\+t}} $\ast$}]{btmp\+\_\+ptr,  }\item[{\mbox{\hyperlink{types_8h_ad8c04c91bab78dc7c80f298f11ff2cd7}{offset\+\_\+t}}}]{bit\+\_\+idx,  }\item[{\mbox{\hyperlink{types_8h_a253b248072cfc8bd812c69acd0046eed}{Bool}}}]{taken }\end{DoxyParamCaption})}



{\ttfamily bitmap\+\_\+set}用于设置{\ttfamily btmp\+\_\+ptr}指向的位图中偏移量为{\ttfamily bit\+\_\+idx}的位 


\begin{DoxyParams}{参数}
{\em btmp\+\_\+ptr} & 指向被设置的位图的指针 \\
\hline
{\em bit\+\_\+idx} & 需要设置的位在位图中的偏移 \\
\hline
{\em taken} & 若为\+True, 则将位设置为1, 表示资源被占用; 若为\+False, 则将位设置为0, 表示资源没有没占用 \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{stdbitmap_8h_a7dde0c9bd3cb255266ef4f3c0be77359}\label{stdbitmap_8h_a7dde0c9bd3cb255266ef4f3c0be77359}} 
\index{stdbitmap.h@{stdbitmap.h}!bitmap\_test@{bitmap\_test}}
\index{bitmap\_test@{bitmap\_test}!stdbitmap.h@{stdbitmap.h}}
\doxysubsubsection{\texorpdfstring{bitmap\_test()}{bitmap\_test()}}
{\footnotesize\ttfamily \mbox{\hyperlink{types_8h_a253b248072cfc8bd812c69acd0046eed}{Bool}} bitmap\+\_\+test (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{stdbitmap_8h_ab332e61ebf800daa3f1100099da4b005}{bitmap\+\_\+t}} $\ast$}]{btmp\+\_\+ptr,  }\item[{\mbox{\hyperlink{types_8h_ad8c04c91bab78dc7c80f298f11ff2cd7}{offset\+\_\+t}}}]{bit\+\_\+idx }\end{DoxyParamCaption})}



{\ttfamily bitmap\+\_\+test}用于测试{\ttfamily btmp\+\_\+ptr}指向的位图中{\ttfamily bit\+\_\+idx}位是否被占用 


\begin{DoxyParams}{参数}
{\em btmp\+\_\+ptr} & 指向需要测试的位图的指针 \\
\hline
{\em bit\+\_\+idx} & 需要测试的位的偏移 \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{返回}
True 测试的位已经被占用 

False 测试的位未被占用 
\end{DoxyReturn}
