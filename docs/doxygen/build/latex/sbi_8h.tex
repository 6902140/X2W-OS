\hypertarget{sbi_8h}{}\doxysection{/home/data/proj/oskernel2023-\/x2w/include/sbi/sbi.h 文件参考}
\label{sbi_8h}\index{/home/data/proj/oskernel2023-\/x2w/include/sbi/sbi.h@{/home/data/proj/oskernel2023-\/x2w/include/sbi/sbi.h}}


{\ttfamily \mbox{\hyperlink{sbi_8h}{sbi.\+h}}}为操作系统提供了\+S\+B\+I调用(M模式下的功能接口)  


{\ttfamily \#include \char`\"{}types.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}constrains.\+h\char`\"{}}\newline
\doxysubsection*{宏定义}
\begin{DoxyCompactItemize}
\item 
\#define \mbox{\hyperlink{sbi_8h_ab1806b9b2fd36cdda4cd3a5a1ddde20a}{\+\_\+\+S\+B\+I\+C\+A\+LL}}(scall\+\_\+id,  arg0,  arg1,  arg2)
\begin{DoxyCompactList}\small\item\em {\ttfamily \+\_\+\+S\+B\+I\+C\+A\+LL}宏函数将会触发{\ttfamily ecall}异常, 而后跳转到{\ttfamily strap\+\_\+enter}函数中运行, 该函数定义在{\ttfamily strap\+\_\+entry.\+S}中 \end{DoxyCompactList}\item 
\mbox{\Hypertarget{sbi_8h_a7a8a7d93e06d03d9378b3fdcf405924a}\label{sbi_8h_a7a8a7d93e06d03d9378b3fdcf405924a}} 
\#define \mbox{\hyperlink{sbi_8h_a7a8a7d93e06d03d9378b3fdcf405924a}{\+\_\+\+S\+B\+I\+C\+A\+L\+L0}}(scall\+\_\+id)~\mbox{\hyperlink{sbi_8h_ab1806b9b2fd36cdda4cd3a5a1ddde20a}{\+\_\+\+S\+B\+I\+C\+A\+LL}}(scall\+\_\+id, 0, 0, 0)
\begin{DoxyCompactList}\small\item\em {\ttfamily \+\_\+\+S\+B\+I\+C\+A\+L\+L0}为接受0个参数的{\ttfamily S\+BI}调用 \end{DoxyCompactList}\item 
\mbox{\Hypertarget{sbi_8h_a9fbe8366d23e803d18afa20376174fb1}\label{sbi_8h_a9fbe8366d23e803d18afa20376174fb1}} 
\#define \mbox{\hyperlink{sbi_8h_a9fbe8366d23e803d18afa20376174fb1}{\+\_\+\+S\+B\+I\+C\+A\+L\+L1}}(scall\+\_\+id,  arg0)~\mbox{\hyperlink{sbi_8h_ab1806b9b2fd36cdda4cd3a5a1ddde20a}{\+\_\+\+S\+B\+I\+C\+A\+LL}}(scall\+\_\+id, arg0, 0, 0)
\begin{DoxyCompactList}\small\item\em {\ttfamily \+\_\+\+S\+B\+I\+C\+A\+L\+L1}为接受1个参数的{\ttfamily S\+BI}调用 \end{DoxyCompactList}\item 
\mbox{\Hypertarget{sbi_8h_aec8f8124c74582321259980998d56bdd}\label{sbi_8h_aec8f8124c74582321259980998d56bdd}} 
\#define \mbox{\hyperlink{sbi_8h_aec8f8124c74582321259980998d56bdd}{\+\_\+\+S\+B\+I\+C\+A\+L\+L2}}(scall\+\_\+id,  arg0,  arg1)~\mbox{\hyperlink{sbi_8h_ab1806b9b2fd36cdda4cd3a5a1ddde20a}{\+\_\+\+S\+B\+I\+C\+A\+LL}}(scall\+\_\+id, arg0, arg1, 0)
\begin{DoxyCompactList}\small\item\em {\ttfamily \+\_\+\+S\+B\+I\+C\+A\+L\+L2}为接受2个参数的{\ttfamily S\+BI}调用 \end{DoxyCompactList}\item 
\mbox{\Hypertarget{sbi_8h_a43267e673930713b8f9f97675ac59d03}\label{sbi_8h_a43267e673930713b8f9f97675ac59d03}} 
\#define \mbox{\hyperlink{sbi_8h_a43267e673930713b8f9f97675ac59d03}{\+\_\+\+S\+B\+I\+C\+A\+L\+L3}}(scall\+\_\+id,  arg0,  arg1,  arg2)~\mbox{\hyperlink{sbi_8h_ab1806b9b2fd36cdda4cd3a5a1ddde20a}{\+\_\+\+S\+B\+I\+C\+A\+LL}}(scall\+\_\+id, arg0, arg1, arg2)
\begin{DoxyCompactList}\small\item\em {\ttfamily \+\_\+\+S\+B\+I\+C\+A\+L\+L3}为接受3个参数的{\ttfamily S\+BI}调用 \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{类型定义}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{sbi_8h_a1a40f8005dee91348ffaa10d8d059a7e}\label{sbi_8h_a1a40f8005dee91348ffaa10d8d059a7e}} 
typedef enum \mbox{\hyperlink{sbi_8h_a334b7276d6f4a176fa31284884cb19c6}{\+\_\+\+\_\+sbicall\+\_\+id\+\_\+t}} \mbox{\hyperlink{sbi_8h_a1a40f8005dee91348ffaa10d8d059a7e}{sbicall\+\_\+id\+\_\+t}}
\begin{DoxyCompactList}\small\item\em {\ttfamily sbicall\+\_\+id\+\_\+t}内定义了{\ttfamily S\+BI}调用号 \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{枚举}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{sbi_8h_a334b7276d6f4a176fa31284884cb19c6}\label{sbi_8h_a334b7276d6f4a176fa31284884cb19c6}} 
enum \mbox{\hyperlink{sbi_8h_a334b7276d6f4a176fa31284884cb19c6}{\+\_\+\+\_\+sbicall\+\_\+id\+\_\+t}} \{ {\bfseries S\+B\+I\+C\+A\+L\+L\+\_\+\+S\+E\+T\+T\+I\+M\+ER}, 
{\bfseries S\+B\+I\+C\+A\+L\+L\+\_\+\+C\+O\+N\+S\+O\+L\+E\+\_\+\+P\+U\+T\+C\+H\+AR}, 
{\bfseries S\+B\+I\+C\+A\+L\+L\+\_\+\+C\+O\+N\+S\+O\+L\+E\+\_\+\+P\+U\+T\+S\+TR}, 
{\bfseries S\+B\+I\+C\+A\+L\+L\+\_\+\+C\+O\+N\+S\+O\+L\+E\+\_\+\+G\+E\+T\+C\+H\+AR}
 \}
\begin{DoxyCompactList}\small\item\em {\ttfamily sbicall\+\_\+id\+\_\+t}内定义了{\ttfamily S\+BI}调用号 \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{函数}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{sbi_8h_a3fd620bafabc522ae9fec0063d74f561}{sbi\+\_\+settimer}} (\mbox{\hyperlink{types_8h_aa232ecf786a74ce5363c36c10798d2b1}{uint64\+\_\+t}} value)
\begin{DoxyCompactList}\small\item\em {\ttfamily sbi\+\_\+settimer}用于设置时钟 \end{DoxyCompactList}\item 
void \mbox{\hyperlink{sbi_8h_ae84b1d0d5e4e560a640e32e1516d9134}{sbi\+\_\+putc}} (char c)
\begin{DoxyCompactList}\small\item\em {\ttfamily sbi\+\_\+putc}用于向终端输出一个字符 \end{DoxyCompactList}\item 
void \mbox{\hyperlink{sbi_8h_aa07077ca42bb9255058acb8227b65cce}{sbi\+\_\+puts}} (char $\ast$str)
\begin{DoxyCompactList}\small\item\em {\ttfamily sbi\+\_\+puts}用于向字符输出一个字符串 \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{详细描述}
{\ttfamily \mbox{\hyperlink{sbi_8h}{sbi.\+h}}}为操作系统提供了\+S\+B\+I调用(M模式下的功能接口) 

\begin{DoxyAuthor}{作者}
Shihong Wang (\href{mailto:jack4shihong@gamil.com}{\texttt{ jack4shihong@gamil.\+com}}) 
\end{DoxyAuthor}
\begin{DoxyVersion}{版本}
0.\+1 
\end{DoxyVersion}
\begin{DoxyDate}{日期}
2023-\/04-\/15
\end{DoxyDate}
\begin{DoxyCopyright}{版权所有}
Copyright Shihong Wang (c) 2023 with G\+NU Public License V3.\+0 
\end{DoxyCopyright}


\doxysubsection{宏定义说明}
\mbox{\Hypertarget{sbi_8h_ab1806b9b2fd36cdda4cd3a5a1ddde20a}\label{sbi_8h_ab1806b9b2fd36cdda4cd3a5a1ddde20a}} 
\index{sbi.h@{sbi.h}!\_SBICALL@{\_SBICALL}}
\index{\_SBICALL@{\_SBICALL}!sbi.h@{sbi.h}}
\doxysubsubsection{\texorpdfstring{\_SBICALL}{\_SBICALL}}
{\footnotesize\ttfamily \#define \+\_\+\+S\+B\+I\+C\+A\+LL(\begin{DoxyParamCaption}\item[{}]{scall\+\_\+id,  }\item[{}]{arg0,  }\item[{}]{arg1,  }\item[{}]{arg2 }\end{DoxyParamCaption})}

{\bfseries 值\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{    (\{             \(\backslash\)}
\DoxyCodeLine{    register \mbox{\hyperlink{types_8h_a48f2f43c22b22212994d19244ccb10fc}{ireg\_t}} a0 \textcolor{keyword}{asm} (\textcolor{stringliteral}{"a0"}) = (\mbox{\hyperlink{types_8h_a48f2f43c22b22212994d19244ccb10fc}{ireg\_t}})(arg0);         \(\backslash\)}
\DoxyCodeLine{    register \mbox{\hyperlink{types_8h_a48f2f43c22b22212994d19244ccb10fc}{ireg\_t}} a1 \textcolor{keyword}{asm} (\textcolor{stringliteral}{"a1"}) = (\mbox{\hyperlink{types_8h_a48f2f43c22b22212994d19244ccb10fc}{ireg\_t}})(arg1);         \(\backslash\)}
\DoxyCodeLine{    register \mbox{\hyperlink{types_8h_a48f2f43c22b22212994d19244ccb10fc}{ireg\_t}} a2 \textcolor{keyword}{asm} (\textcolor{stringliteral}{"a2"}) = (\mbox{\hyperlink{types_8h_a48f2f43c22b22212994d19244ccb10fc}{ireg\_t}})(arg2);         \(\backslash\)}
\DoxyCodeLine{    register \mbox{\hyperlink{types_8h_a48f2f43c22b22212994d19244ccb10fc}{ireg\_t}} a7 \textcolor{keyword}{asm} (\textcolor{stringliteral}{"a7"}) = (\mbox{\hyperlink{types_8h_a48f2f43c22b22212994d19244ccb10fc}{ireg\_t}})(scall\_id);     \(\backslash\)}
\DoxyCodeLine{    asm \textcolor{keyword}{volatile} (                                          \(\backslash\)}
\DoxyCodeLine{        \textcolor{stringliteral}{"ecall"}                                             \(\backslash\)}
\DoxyCodeLine{        : \textcolor{stringliteral}{"+r"}  (a0)                                        \(\backslash\)}
\DoxyCodeLine{        : \textcolor{stringliteral}{"r"}   (a1),   \textcolor{stringliteral}{"r"}   (a2),   \textcolor{stringliteral}{"r"}   (a7)            \(\backslash\)}
\DoxyCodeLine{        : \textcolor{stringliteral}{"memory"}                                          \(\backslash\)}
\DoxyCodeLine{    );                                                      \(\backslash\)}
\DoxyCodeLine{    a0;                                                     \(\backslash\)}
\DoxyCodeLine{\})}

\end{DoxyCode}


{\ttfamily \+\_\+\+S\+B\+I\+C\+A\+LL}宏函数将会触发{\ttfamily ecall}异常, 而后跳转到{\ttfamily strap\+\_\+enter}函数中运行, 该函数定义在{\ttfamily strap\+\_\+entry.\+S}中 

\begin{DoxyNote}{注解}
该宏函数需要注意的是\+:
\begin{DoxyEnumerate}
\item 目前最大支持三个参数, 分别使用a0, a1, a2寄存器传递
\item {\ttfamily ecall}调用号保存在{\ttfamily a7}寄存器中
\item 返回至保存在a0寄存器中 
\end{DoxyEnumerate}
\end{DoxyNote}


\doxysubsection{函数说明}
\mbox{\Hypertarget{sbi_8h_ae84b1d0d5e4e560a640e32e1516d9134}\label{sbi_8h_ae84b1d0d5e4e560a640e32e1516d9134}} 
\index{sbi.h@{sbi.h}!sbi\_putc@{sbi\_putc}}
\index{sbi\_putc@{sbi\_putc}!sbi.h@{sbi.h}}
\doxysubsubsection{\texorpdfstring{sbi\_putc()}{sbi\_putc()}}
{\footnotesize\ttfamily void sbi\+\_\+putc (\begin{DoxyParamCaption}\item[{char}]{c }\end{DoxyParamCaption})}



{\ttfamily sbi\+\_\+putc}用于向终端输出一个字符 


\begin{DoxyParams}{参数}
{\em c} & 需要输出的字符 \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{sbi_8h_aa07077ca42bb9255058acb8227b65cce}\label{sbi_8h_aa07077ca42bb9255058acb8227b65cce}} 
\index{sbi.h@{sbi.h}!sbi\_puts@{sbi\_puts}}
\index{sbi\_puts@{sbi\_puts}!sbi.h@{sbi.h}}
\doxysubsubsection{\texorpdfstring{sbi\_puts()}{sbi\_puts()}}
{\footnotesize\ttfamily void sbi\+\_\+puts (\begin{DoxyParamCaption}\item[{char $\ast$}]{str }\end{DoxyParamCaption})}



{\ttfamily sbi\+\_\+puts}用于向字符输出一个字符串 


\begin{DoxyParams}{参数}
{\em str} & 需要输出的0-\/terminated字符串\\
\hline
\end{DoxyParams}
\begin{DoxyWarning}{警告}
{\ttfamily sbi\+\_\+puts}不会对str是否是以\textquotesingle{}\textbackslash{}0\textquotesingle{}结尾进行检查 
\end{DoxyWarning}
\mbox{\Hypertarget{sbi_8h_a3fd620bafabc522ae9fec0063d74f561}\label{sbi_8h_a3fd620bafabc522ae9fec0063d74f561}} 
\index{sbi.h@{sbi.h}!sbi\_settimer@{sbi\_settimer}}
\index{sbi\_settimer@{sbi\_settimer}!sbi.h@{sbi.h}}
\doxysubsubsection{\texorpdfstring{sbi\_settimer()}{sbi\_settimer()}}
{\footnotesize\ttfamily void sbi\+\_\+settimer (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{types_8h_aa232ecf786a74ce5363c36c10798d2b1}{uint64\+\_\+t}}}]{value }\end{DoxyParamCaption})}



{\ttfamily sbi\+\_\+settimer}用于设置时钟 


\begin{DoxyParams}{参数}
{\em value} & 时钟的值 \\
\hline
\end{DoxyParams}
